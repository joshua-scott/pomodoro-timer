{"version":3,"sources":["app.js"],"names":["buttons","document","querySelectorAll","isBreak","countdown","times","break","querySelector","work","mainDisplay","main","mode","setTime","e","preventDefault","change","which","dataset","newTime","parseInt","textContent","timer","seconds","clearInterval","startTime","Date","now","endTime","classList","remove","add","displayTimeLeft","setInterval","secondsLeft","Math","round","secs","hours","floor","mins","display","toTwoDigits","title","num","forEach","btn","addEventListener"],"mappings":"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","file":"app.js","sourcesContent":["const buttons = document.querySelectorAll('[data-change]');\r\nlet isBreak = true;\r\nlet countdown;\r\n\r\nconst times = {\r\n  break: document.querySelector('.break .time'),\r\n  work: document.querySelector('.work .time')\r\n};\r\n\r\nconst mainDisplay = {\r\n  main: document.querySelector('.timer'),\r\n  mode: document.querySelector('.timer .mode'),\r\n  countdown: document.querySelector('.timer .countdown')\r\n};\r\n\r\nfunction setTime(e) {\r\n  e.preventDefault();\r\n  const { change, which } = this.dataset;\r\n  let newTime = parseInt(times[which].textContent) + parseInt(change);\r\n  if (newTime < 0) newTime = 0;\r\n  times[which].textContent = newTime;\r\n}\r\n\r\nfunction timer(seconds) {\r\n  clearInterval(countdown); // Clear any existing timers\r\n  const startTime = Date.now();\r\n  const endTime = startTime + seconds * 1000;\r\n\r\n  if (isBreak) {\r\n    mainDisplay.mode.textContent = 'Break';\r\n    mainDisplay.main.classList.remove('worktime');\r\n    mainDisplay.main.classList.add('breaktime');\r\n  } else {\r\n    mainDisplay.mode.textContent = 'Work';\r\n    mainDisplay.main.classList.remove('breaktime');\r\n    mainDisplay.main.classList.add('worktime');\r\n  }\r\n\r\n  displayTimeLeft(seconds); // We call this now to avoid having to wait a second for setInterval\r\n\r\n  // Every second, either switch mode or show the time left\r\n  countdown = setInterval(() => {\r\n    const secondsLeft = Math.round((endTime - Date.now()) / 1000);\r\n    if (secondsLeft < 0) {\r\n      isBreak = !isBreak;\r\n      const newTime = isBreak ? times.break.textContent * 60 : times.work.textContent * 60;\r\n      timer(newTime);\r\n    } else {\r\n      displayTimeLeft(secondsLeft);\r\n    }\r\n  }, 1000);\r\n}\r\n\r\nfunction displayTimeLeft(secs) {\r\n  // convert secs into hours/mins/secs\r\n  const hours = Math.floor(secs / 3600);\r\n  secs = secs % 3600;\r\n  const mins = Math.floor(secs / 60);\r\n  secs = secs % 60;\r\n\r\n  let display = '';\r\n  \r\n  if (hours > 0) {\r\n    display = `${hours}:${toTwoDigits(mins)}:${toTwoDigits(secs)}`;\r\n  } else {\r\n    display = `${mins}:${toTwoDigits(secs)}`;\r\n  }\r\n\r\n  mainDisplay.countdown.textContent = display;\r\n  document.title = `${display} (${isBreak ? 'Break' : 'Work'})`;\r\n}\r\n\r\nfunction toTwoDigits(num) {\r\n  return `${num < 10 ? '0' : ''}${num}`;\r\n}\r\n\r\nbuttons.forEach(btn => btn.addEventListener('click', setTime));\r\nmainDisplay.main.addEventListener('click', () => {\r\n  isBreak = !isBreak;\r\n  const newTime = isBreak ? times.break.textContent * 60 : times.work.textContent * 60;\r\n  timer(newTime);\r\n});"]}